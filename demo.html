<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Video Pagination</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-50 p-4">
    <div
      id="videos"
      class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"
    ></div>

    <div class="flex justify-center items-center mt-6 gap-4">
      <button
        id="prev"
        class="px-4 py-2 bg-gray-200 rounded disabled:opacity-50"
      >
        Previous
      </button>
      <span id="pageInfo" class="font-medium"></span>
      <button
        id="next"
        class="px-4 py-2 bg-blue-500 text-white rounded disabled:opacity-50"
      >
        Next
      </button>
    </div>

    <script>
      const videosPerPage = 9; // how many videos per page
      let currentPage = 1;
      let totalPages = 1;
      let allVideos = [];

      function renderPage(page) {
        const container = document.getElementById("videos");
        container.innerHTML = "";

        const start = (page - 1) * videosPerPage;
        const end = start + videosPerPage;
        const pageVideos = allVideos.slice(start, end);

        pageVideos.forEach((file) => {
          const iframe = document.createElement("iframe");
          iframe.src = `https://drive.google.com/file/d/${file.id}/preview`;
          iframe.className = "w-full aspect-video rounded";
          iframe.allow = "autoplay";
          iframe.allowFullscreen = true;
          container.appendChild(iframe);
        });

        // Update buttons and info
        document.getElementById("prev").disabled = page === 1;
        document.getElementById("next").disabled = page === totalPages;
        document.getElementById(
          "pageInfo"
        ).textContent = `Page ${page} of ${totalPages}`;
      }

      function fetchVideos() {
        fetch("data.json")
          .then((res) => res.json())
          .then((data) => {
            allVideos = data;
            totalPages = Math.ceil(allVideos.length / videosPerPage);
            renderPage(currentPage);
          })
          .catch((err) => console.error(err));
      }

      // Initial load
      fetchVideos();

      // Button listeners
      document.getElementById("next").addEventListener("click", () => {
        if (currentPage < totalPages) {
          currentPage++;
          renderPage(currentPage);
        }
      });

      document.getElementById("prev").addEventListener("click", () => {
        if (currentPage > 1) {
          currentPage--;
          renderPage(currentPage);
        }
      });
    </script>
  </body>
</html>
